image: php:7.4-cli
before_script:
  - apt-get update && apt-get install -y git zip unzip
cache:
  paths:
    - vendor/
stages:
  - test
.job_template: &build_template
  before_script:
    - curl -sS https://getcomposer.org/installer | php
    - php composer.phar install
    - php composer.phar dumpautoload
test:unit:
  <<: *build_template
  stage: test
  script:
    - cd $CI_PROJECT_DIR
    - php composer.phar phpunit
